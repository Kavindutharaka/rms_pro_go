<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Table Booking - RMS Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="css/modern.css" rel="stylesheet" />
    <script src="./lib/signalr.js"></script>
    <script src="./support/angular.min.js"></script>
    <script src="./angi/Waiter.js?t=114450"></script>
</head>

<body ng-app="RMSApp" ng-cloak ng-controller="HomeCtrl" class="bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 min-h-screen">
    <div class="max-w-7xl mx-auto p-4">
        <!-- Header -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-xl mb-6 p-4">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div class="text-white text-2xl font-bold">
                    Welcome, {{dn}}
                </div>
                <div class="flex gap-3">
                    <button type="button" class="w_btn01 w_btn_c_b" ng-click="home_clk()">
                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                        </svg>
                        HOME
                    </button>
                    <button type="button" class="w_btn01 w_btn_c_o" ng-click="exit()">
                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                        </svg>
                        Exit
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6">
            <!-- Tab Switcher -->
            <div class="flex gap-3 mb-6 justify-center">
                <button type="button" class="btn_04" ng-click="main_btn_call(1)">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    Tables
                </button>
                <button type="button" class="btn_04" ng-click="main_btn_call(2)">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Pending Orders
                </button>
            </div>

            <!-- Tables View -->
            <div ng-show="main_sel == 1">
                <!-- Table Grid View -->
                <div ng-show="tb_view == 1">
                    <!-- Filter Buttons -->
                    <div class="flex flex-wrap gap-2 mb-6 justify-center">
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('')">All</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('BG ')">Bar G</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('CG ')">Coffee G</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('VI ')">VIP</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('VV ')">VVIP</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('CP ')">Park</button>
                        <button type="button" class="w_btn01 w_btn_c_o" ng-click="tb_search('HO ')">Horse</button>
                    </div>

                    <!-- Tables Grid -->
                    <div class="flex flex-wrap justify-center gap-2">
                        <button type="button" class="w_btn_02" ng-repeat="xx in load_tb | filter:tb_search_d" ng-click="sel_tb(xx)" ng-class="{ w_Tb_bk_c: xx.u != 0}">
                            <p class="font-bold">{{xx.n}}</p>
                            <p class="text-xs mt-1 opacity-80">{{xx.un}}</p>
                        </button>
                    </div>
                </div>

                <!-- Table Details View -->
                <div ng-show="tb_view == 2">
                    <div class="text-3xl font-bold text-center mb-6 text-gray-800">{{seled_tb}}</div>

                    <div class="tab">
                        <button class="tablinks" id="b1" onclick="openCity(event, 'London')">
                            <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                            </svg>
                            Items
                        </button>
                        <button class="tablinks" onclick="openCity(event, 'Paris')">
                            <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                            </svg>
                            Add New
                        </button>
                        <button type="button" class="tablinks w_btn_c_o" ng-click="all_tb_view()">
                            <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                            </svg>
                            All Tables
                        </button>
                    </div>

                    <!-- Items Tab Content -->
                    <div id="London" class="tabcontent">
                        <h3 class="text-xl font-bold mb-4 text-gray-700">Current Items</h3>
                        <div class="overflow-x-auto rounded-lg border border-gray-200">
                            <table class="min-w-full">
                                <tbody class="divide-y divide-gray-200 bg-gradient-to-r from-blue-900 to-indigo-900 text-white">
                                    <tr ng-repeat="xx in item_by_tb" class="hover:bg-white/10">
                                        <td class="tb_td text-center font-semibold">{{$index+1}}</td>
                                        <td class="tb_td text-left">{{xx.pn}}</td>
                                        <td class="tb_td text-right">
                                            <div ng-class="{line_on:xx.sp != xx.dis_v}" ng-hide="xx.sp == xx.dis_v" style="display:inline-block;">{{xx.sp}}&nbsp;</div>
                                            <div style="display:inline-block;">{{xx.dis_v}}</div>
                                        </td>
                                        <td class="tb_td text-center">{{xx.sn}}</td>
                                    </tr>
                                    <tr class="font-bold bg-blue-800">
                                        <td class="tb_td"></td>
                                        <td class="tb_td text-left">Total</td>
                                        <td class="tb_td text-right">{{tot | currency:''}}</td>
                                        <td class="tb_td"></td>
                                    </tr>
                                    <tr class="bg-blue-800">
                                        <td class="tb_td"></td>
                                        <td class="tb_td text-left">Service {{s_ch_v}}%</td>
                                        <td class="tb_td text-right">{{s_chg | currency:''}}</td>
                                        <td class="tb_td"></td>
                                    </tr>
                                    <tr class="font-bold text-lg bg-gradient-to-r from-indigo-600 to-blue-600">
                                        <td class="tb_td"></td>
                                        <td class="tb_td text-left">Grand Total</td>
                                        <td class="tb_td text-right">{{g_tot | currency:''}}</td>
                                        <td class="tb_td"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Add New Tab Content -->
                    <div id="Paris" class="tabcontent">
                        <!-- New Order Items -->
                        <div ng-hide="new_order == '' || new_order == null || new_order.length < 0" class="mb-6">
                            <h3 class="text-lg font-bold mb-3 text-gray-700">New Order Items</h3>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <button type="button" class="new_ite" ng-repeat="xx in new_order" ng-click="remove_item(xx)">
                                    <p class="font-semibold">{{xx.n}}</p>
                                    <p class="text-xs text-gray-600">Rs:- {{xx.dis_v}}</p>
                                </button>
                            </div>
                            <div class="text-center">
                                <button type="button" class="w_btn01 w_btn_c_b px-8 py-3 text-lg" ng-click="order_save()">
                                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                    </svg>
                                    Place Order
                                </button>
                            </div>
                            <hr class="my-6">
                        </div>

                        <!-- Category View -->
                        <div ng-show="cat_lst">
                            <h3 class="text-xl font-bold mb-4 text-gray-700">Select Category</h3>
                            <div class="flex flex-wrap justify-center gap-2">
                                <button type="button" class="cat_btn" ng-repeat="xx in load_cat" ng-click="sel_cat(xx)">{{xx.n}}</button>
                            </div>
                        </div>

                        <!-- Products View -->
                        <div ng-hide="cat_lst">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-700">Select Items</h3>
                                <button type="button" class="w_btn01 w_btn_c_o" ng-click="all_cat_view()">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                    </svg>
                                    Back to Categories
                                </button>
                            </div>

                            <!-- Item Comments Input -->
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Item Comments</label>
                                <input
                                    type="text"
                                    ng-model="i_c"
                                    placeholder="Add special instructions..."
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition duration-200 text-lg"
                                />
                            </div>

                            <!-- Products Grid -->
                            <div class="flex flex-wrap justify-center gap-2">
                                <button type="button" class="btn_prod" ng-repeat="xx in load_pro" ng-click="add_item(xx)">
                                    <p class="font-semibold text-white">{{xx.n}}</p>
                                    <p class="text-sm mt-1">
                                        <span class="text-gray-200">Rs:- </span>
                                        <span ng-class="{line_on:xx.sp != xx.dis_v}" class="text-gray-200">{{xx.sp}}</span>
                                        <span ng-hide="xx.sp == xx.dis_v" class="text-yellow-300 font-bold ml-1">{{xx.dis_v}}</span>
                                    </p>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pending Orders View -->
            <div ng-show="main_sel == 2">
                <h3 class="text-2xl font-bold mb-4 text-gray-700">Pending Orders</h3>
                <div class="overflow-x-auto rounded-lg border border-gray-200">
                    <table class="min-w-full">
                        <thead class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
                            <tr>
                                <th class="px-4 py-3 text-center">#</th>
                                <th class="px-4 py-3 text-left">Item</th>
                                <th class="px-4 py-3 text-center">Table</th>
                                <th class="px-4 py-3 text-center">Status</th>
                                <th class="px-4 py-3 text-center">Time</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 bg-gradient-to-r from-blue-900 to-indigo-900 text-white">
                            <tr ng-repeat="xx in item_by_waiter" class="hover:bg-white/10">
                                <td class="tb_td text-center">{{$index+1}}</td>
                                <td class="tb_td text-left font-medium">{{xx.pn}}</td>
                                <td class="tb_td text-center">{{xx.tb_n}}</td>
                                <td class="tb_td text-center">
                                    <span class="mr-2">{{xx.sn}}</span>
                                    <button type="button" ng-click="iten_done(xx)" class="btn_05 inline-flex items-center">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                        </svg>
                                        DONE
                                    </button>
                                </td>
                                <td class="tb_td text-center text-sm">{{xx.dt | date:'h:mm a'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openCity(evt, cityName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        document.getElementById('London').style.display = "block";
        document.getElementById('b1').classList.add('active');
    </script>
</body>

</html>
